<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>

    <script>
        window.webkit = {
            messageHandlers: {
                invokeHandler: {
                    postMessage: function (info) {
//                        console.log(info);
                    }
                },
                publishHandler: {
                    postMessage: function (info) {
//                        console.log(info);
                    }
                }
            }
        }
        WeixinJSCore = {
            publishHandler: function () {

            },
            invokeHandler: function () {

            }
        }
    </script>
    <script>
    var fn = function(event) {
        document.dispatchEvent(new CustomEvent("generateFuncReady", {
            detail: {
                generateFunc: $gwx('page.wxml')
            }
        }))
    }
    window.addEventListener('load', fn)
    </script>
    <script>
        var __webviewId__;
    </script>
    <script>
        __wxRoute = 'pages/index/index';
        __wxRouteBegin = true
        __wxConfig = {
            "env": {
                "USER_DATA_PATH": "",
            },
            "debug": true,
            "pages": ["page/index/index"],
            "window": {
                "backgroundTextStyle": "light",
                "navigationBarBackgroundColor": "#fff",
                "navigationBarTitleText": "WeChat",
                "navigationBarTextStyle": "black"
            },
            "projectConfig": {
                "Network": {
                    "RequestDomain": [],
                    "WsRequestDomain": [],
                    "UploadDomain": [],
                    "DownloadDomain": []
                },
                "Setting": {
                    "MaxLocalstorageSize": 10,
                    "MaxCodeSize": 5,
                    "MaxWebviewDepth": 5,
                    "MaxBackgroundLifespan": 300,
                    "MaxRequestConcurrent": 5,
                    "MaxUploadConcurrent": 1,
                    "MaxDownloadConcurrent": 5
                },
                "appid": "touristappid"
            },
            "appserviceConfig": {
                "AppserviceMaxDataSize": 1048576,
                "HTTPSetting": {
                    "HTTPHeaderMode": "BlackList",
                    "HeaderBlackList": ["User-Agent"],
                    "HeaderWhiteList": [],
                    "UploadMaxTimeoutMS": 60000,
                    "DownloadMaxTimeoutMS": 60000,
                    "WebsocketMaxTimeoutMS": 60000,
                    "RequestMaxTimeoutMS": 60000,
                    "HTTPHeaderReferer": "servicewechat.com"
                },
                "CDNBaseURL": "https://res.wx.qq.com/weapp",
                "AppMaxRunningCount": 5
            },
            "appname": "fdfaf",
            "appid": "touristappid",
            "apphash": 2107567080,
            "isTourist": true,
            "userInfo": {}
        }
    </script>
    <script>
    </script>
    <script src="./split/WAService.js"></script>
    <script src="./split/WAWebview.js"></script>
    <script src="./split/virtual_dom.js"></script>
    <script src="./split/exparser.js"></script>
    <script src="./split/exparser-behvaior.js"></script>
    <script src="./split/define.js"></script>
    <!-- {{allWXML}} -->
    <!--{{eruda}}-->
    <!--{{style}}-->
    <!--{{currentstyle}}-->
    <!--{{generateFunc}}-->
    <script type="text/javascript" src="./page.js"></script>

</head>

<body>
<div id="app"></div>
</body>
<script>
</script>
<script>__wxRouteBegin = true</script>
<script>
    define("app.js", function(require, module){var window={Math:Math}/*兼容babel*/,location,document,navigator,self,localStorage,history,Caches;
        App({
            onLaunch: function () {
                console.log("ONLUANCH")
            }
        })
    });
    require("app.js");

    define("page.js", function(require, module){var window={Math:Math}/*兼容babel*/,location,document,navigator,self,localStorage,history,Caches;
        var app = getApp();
        var initData = 'this is first line\nthis is second line'
        var extraLine = [];

        Page({
            data: {
                text: initData
            },
            onLoad: function(o) {
                console.log(" --> ", o)
            },
            add: function(e) {
                extraLine.push('other line')
                console.log(e);
                this.setData({
                    text: initData + '\n' + extraLine.join('\n')
                })
            },
            remove: function(e) {
                if (extraLine.length > 0) {
                    extraLine.pop()
                    this.setData({
                        text: initData + '\n' + extraLine.join('\n')
                    })
                }
            }
        })    });
    require("page.js");
</script>
</html>
